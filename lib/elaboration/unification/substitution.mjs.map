{"version":3,"sources":["../../../src/elaboration/unification/substitution.ts"],"sourcesContent":["import * as NF from \"@yap/elaboration/normalization\";\nimport * as EB from \"@yap/elaboration\";\n\nconst Substitution: unique symbol = Symbol(\"Substitution\");\nexport type Subst = Record<number, NF.Value> & { [Substitution]: void };\n\nexport const empty: Subst = { [Substitution]: void 0 };\nexport const of = (k: number, v: NF.Value): Subst => ({ [k]: v, [Substitution]: void 0 });\nexport const from = (record: Record<number, NF.Value>): Subst => ({ ...record, [Substitution]: void 0 });\n\nexport const display = (subst: Subst, metas: EB.Context[\"metas\"], separator = \"\\n\"): string => {\n\tif (Object.keys(subst).length === 0) {\n\t\treturn \"empty\";\n\t}\n\treturn Object.entries(subst)\n\t\t.map(([key, value]) => `?${key} |=> ${NF.display(value, { zonker: subst, metas, env: [] })}`)\n\t\t.join(separator);\n};\n\nexport function compose(newer: Subst, old: Subst): Subst;\nexport function compose(old: Subst): (newer: Subst) => Subst;\nexport function compose(...args: [Subst, Subst] | [Subst]) {\n\tconst _compose = (newer: Subst, old: Subst): Subst => ({ ...old, ...newer });\n\n\tif (args.length === 1) {\n\t\treturn (newer: Subst) => _compose(newer, args[0]);\n\t}\n\n\treturn _compose(args[0], args[1]);\n}\n"],"mappings":";AAAA,YAAY,QAAQ;AAGpB,MAAM,eAA8B,OAAO,cAAc;AAGlD,MAAM,QAAe,EAAE,CAAC,YAAY,GAAG,OAAO;AAC9C,MAAM,KAAK,CAAC,GAAW,OAAwB,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,YAAY,GAAG,OAAO;AAChF,MAAM,OAAO,CAAC,YAA6C,EAAE,GAAG,QAAQ,CAAC,YAAY,GAAG,OAAO;AAE/F,MAAM,UAAU,CAAC,OAAc,OAA4B,YAAY,SAAiB;AAC9F,MAAI,OAAO,KAAK,KAAK,EAAE,WAAW,GAAG;AACpC,WAAO;AAAA,EACR;AACA,SAAO,OAAO,QAAQ,KAAK,EACzB,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,IAAI,GAAG,QAAQ,GAAG,QAAQ,OAAO,EAAE,QAAQ,OAAO,OAAO,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,EAC3F,KAAK,SAAS;AACjB;AAIO,SAAS,WAAW,MAAgC;AAC1D,QAAM,WAAW,CAAC,OAAc,SAAuB,EAAE,GAAG,KAAK,GAAG,MAAM;AAE1E,MAAI,KAAK,WAAW,GAAG;AACtB,WAAO,CAAC,UAAiB,SAAS,OAAO,KAAK,CAAC,CAAC;AAAA,EACjD;AAEA,SAAO,SAAS,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;AACjC;","names":[]}