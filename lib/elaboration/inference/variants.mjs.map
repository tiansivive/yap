{"version":3,"sources":["../../../src/elaboration/inference/variants.ts"],"sourcesContent":["import * as EB from \"@yap/elaboration\";\nimport * as V2 from \"@yap/elaboration/shared/monad.v2\";\n\nimport * as NF from \"@yap/elaboration/normalization\";\nimport * as Src from \"@yap/src/index\";\n\ntype Variant = Extract<Src.Term, { type: \"variant\" }>;\n\nexport const infer = (variant: Variant): V2.Elaboration<EB.AST> =>\n\tV2.track(\n\t\t{ tag: \"src\", type: \"term\", term: variant, metadata: { action: \"infer\", description: \"Variant\" } },\n\t\tV2.Do(() =>\n\t\t\tV2.local(\n\t\t\t\tEB.muContext,\n\t\t\t\tV2.Do(function* () {\n\t\t\t\t\tconst [tm, us] = yield* EB.check.gen(variant, NF.Type);\n\t\t\t\t\treturn [tm, NF.Type, us] satisfies EB.AST;\n\t\t\t\t}),\n\t\t\t),\n\t\t),\n\t);\n"],"mappings":";AAAA,YAAY,QAAQ;AACpB,YAAY,QAAQ;AAEpB,YAAY,QAAQ;AAKb,MAAM,QAAQ,CAAC,YACrB,GAAG;AAAA,EACF,EAAE,KAAK,OAAO,MAAM,QAAQ,MAAM,SAAS,UAAU,EAAE,QAAQ,SAAS,aAAa,UAAU,EAAE;AAAA,EACjG,GAAG;AAAA,IAAG,MACL,GAAG;AAAA,MACF,GAAG;AAAA,MACH,GAAG,GAAG,aAAa;AAClB,cAAM,CAAC,IAAI,EAAE,IAAI,OAAO,GAAG,MAAM,IAAI,SAAS,GAAG,IAAI;AACrD,eAAO,CAAC,IAAI,GAAG,MAAM,EAAE;AAAA,MACxB,CAAC;AAAA,IACF;AAAA,EACD;AACD;","names":[]}